<div class="panel panel-default age-gender">

  <div class="panel-heading panel-heading--form">
    <div class="row">
      <div class="col-sm-8">
        <h3 class="panel-title">Age &amp; Gender</h3>
      </div>
      <div class="col-sm-2" ng-hide="$ctrl.isError() || $ctrl.loading">
        <select class="form-control input-sm"
          ng-model="$ctrl.metrics[0]"
          ng-change="$ctrl.updateChart()"
          ng-options="item as item.displayName for item in $ctrl.filterOptions(1)">
        </select>
      </div>
      <div class="col-sm-2" ng-hide="$ctrl.isError() || $ctrl.loading">
        <select class="form-control input-sm"
          ng-model="$ctrl.metrics[1]"
          ng-change="$ctrl.updateChart()"
          ng-options="item as item.displayName for item in $ctrl.filterOptions(0)">
        </select>
      </div>
    </div>
  </div>
  <div class="panel-body">
    <div class="row" ng-hide="$ctrl.isError() || $ctrl.loading">

      <div class="col-md-2 text-center label-col">
        <h4 class="wrap text-bold">{{$ctrl.metrics[0].displayName}}</h4>
        <br>
        <h5>
          <span class="fa fa-male" ng-style="{'color': $ctrl.colors[0].male}"></span>
          Male
        </h4>
        <h5>
          <b>{{$ctrl.getTotals(0, 'male').percentage}}&#37;</b>
          ({{$ctrl.getTotals(0, 'male').total}})
        </h5>
        <h5>
          <span class="fa fa-female" ng-style="{'color': $ctrl.colors[0].female}"></span>
          Female
        </h5>
        <h5>
          <b>{{$ctrl.getTotals(0, 'female').percentage}}&#37;</b>
          ({{$ctrl.getTotals(0, 'female').total}})
        </h5>
      </div>

      <div class="col-md-4">
        <div class="demographic-chart">
          <rl-chart data="$ctrl.charts[0]"></rl-chart>
        </div>
      </div>

      <div class="col-md-4">
        <div class="demographic-chart">
          <rl-chart data="$ctrl.charts[1]"></rl-chart>
        </div>
      </div>

      <div class="col-md-2 text-center label-col">
        <h4 class="wrap text-bold">{{$ctrl.metrics[1].displayName}}</h4>
        <br>
        <h5>
          <span class="fa fa-male" ng-style="{'color': $ctrl.colors[1].male}"></span>
          Male
        </h5>
        <h6>
          <b>{{$ctrl.getTotals(1, 'male').percentage}}&#37;</b>
          ({{$ctrl.getTotals(1, 'male').total}})
        </h6>
        <h5>
          <span class="fa fa-female" ng-style="{'color': $ctrl.colors[1].female}"></span>
          Female
        </h5>
        <h6>
          <b>{{$ctrl.getTotals(1, 'female').percentage}}&#37;</b>
          ({{$ctrl.getTotals(1, 'female').total}})
        </h6>
      </div>
    </div>

    <div class="loading" ng-show="$ctrl.loading">
      <i class="fa fa-spinner fa-pulse fa-5x"></i>
    </div>

    <div class="alert alert-danger no-margin" ng-show="$ctrl.isError()">
      <h4 class="alert-title">
        <i class="fa fa-exclamation-triangle"></i>
        There was an error fetching the campaign age &amp; gender data.
      </h4>
      <p>{{$ctrl.data}}</p>
    </div>

  </div>
</div>
